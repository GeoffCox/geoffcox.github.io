const _t=t=>{const e=n=>{const o=n==null?void 0:n.target;o&&!t.contains(o)&&t.dispatchEvent(new CustomEvent("click_outside",{detail:{mouseEvent:n}}))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}};function H(t){return t.split("-")[0]}function U(t){return t.split("-")[1]}function _(t){return["top","bottom"].includes(H(t))?"x":"y"}function J(t){return t==="y"?"height":"width"}function et(t,e,n){let{reference:o,floating:i}=t;const s=o.x+o.width/2-i.width/2,r=o.y+o.height/2-i.height/2,c=_(e),l=J(c),f=o[l]/2-i[l]/2,m=H(e),a=c==="x";let u;switch(m){case"top":u={x:s,y:o.y-i.height};break;case"bottom":u={x:s,y:o.y+o.height};break;case"right":u={x:o.x+o.width,y:r};break;case"left":u={x:o.x-i.width,y:r};break;default:u={x:o.x,y:o.y}}switch(U(e)){case"start":u[c]-=f*(n&&a?-1:1);break;case"end":u[c]+=f*(n&&a?-1:1);break}return u}const yt=async(t,e,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:s=[],platform:r}=n,c=s.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(e));let f=await r.getElementRects({reference:t,floating:e,strategy:i}),{x:m,y:a}=et(f,o,l),u=o,g={},d=0;for(let y=0;y<c.length;y++){const{name:v,fn:h}=c[y],{x:p,y:x,data:b,reset:w}=await h({x:m,y:a,initialPlacement:o,placement:u,strategy:i,middlewareData:g,rects:f,platform:r,elements:{reference:t,floating:e}});if(m=p??m,a=x??a,g={...g,[v]:{...g[v],...b}},w&&d<=50){d++,typeof w=="object"&&(w.placement&&(u=w.placement),w.rects&&(f=w.rects===!0?await r.getElementRects({reference:t,floating:e,strategy:i}):w.rects),{x:m,y:a}=et(f,u,l)),y=-1;continue}}return{x:m,y:a,placement:u,strategy:i,middlewareData:g}};function vt(t){return{top:0,right:0,bottom:0,left:0,...t}}function lt(t){return typeof t!="number"?vt(t):{top:t,right:t,bottom:t,left:t}}function I(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function at(t,e){var n;e===void 0&&(e={});const{x:o,y:i,platform:s,rects:r,elements:c,strategy:l}=t,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:a="floating",altBoundary:u=!1,padding:g=0}=e,d=lt(g),v=c[u?a==="floating"?"reference":"floating":a],h=I(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:f,rootBoundary:m,strategy:l})),p=a==="floating"?{...r.floating,x:o,y:i}:r.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),b=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},w=I(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:p,offsetParent:x,strategy:l}):p);return{top:(h.top-w.top+d.top)/b.y,bottom:(w.bottom-h.bottom+d.bottom)/b.y,left:(h.left-w.left+d.left)/b.x,right:(w.right-h.right+d.right)/b.x}}const bt=Math.min,At=Math.max;function G(t,e,n){return At(t,bt(e,n))}const $t=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:o=0}=t??{},{x:i,y:s,placement:r,rects:c,platform:l}=e;if(n==null)return{};const f=lt(o),m={x:i,y:s},a=_(r),u=J(a),g=await l.getDimensions(n),d=a==="y"?"top":"left",y=a==="y"?"bottom":"right",v=c.reference[u]+c.reference[a]-m[a]-c.floating[u],h=m[a]-c.reference[a],p=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n));let x=p?a==="y"?p.clientHeight||0:p.clientWidth||0:0;x===0&&(x=c.floating[u]);const b=v/2-h/2,w=f[d],B=x-g[u]-f[y],C=x/2-g[u]/2+b,P=G(w,C,B),D=U(r)!=null&&C!=P&&c.reference[u]/2-(C<w?f[d]:f[y])-g[u]/2<0?C<w?w-C:B-C:0;return{[a]:m[a]-D,data:{[a]:P,centerOffset:C-P}}}}),Rt={left:"right",right:"left",bottom:"top",top:"bottom"};function X(t){return t.replace(/left|right|bottom|top/g,e=>Rt[e])}function Ct(t,e,n){n===void 0&&(n=!1);const o=U(t),i=_(t),s=J(i);let r=i==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(r=X(r)),{main:r,cross:X(r)}}const Et={start:"end",end:"start"};function nt(t){return t.replace(/start|end/g,e=>Et[e])}function Ot(t){const e=X(t);return[nt(t),e,nt(e)]}const jt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:o,middlewareData:i,rects:s,initialPlacement:r,platform:c,elements:l}=e,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:a,fallbackStrategy:u="bestFit",flipAlignment:g=!0,...d}=t,y=H(o),h=a||(y===r||!g?[X(r)]:Ot(r)),p=[r,...h],x=await at(e,d),b=[];let w=((n=i.flip)==null?void 0:n.overflows)||[];if(f&&b.push(x[y]),m){const{main:k,cross:D}=Ct(o,s,await(c.isRTL==null?void 0:c.isRTL(l.floating)));b.push(x[k],x[D])}if(w=[...w,{placement:o,overflows:b}],!b.every(k=>k<=0)){var B,C;const k=((B=(C=i.flip)==null?void 0:C.index)!=null?B:0)+1,D=p[k];if(D)return{data:{index:k,overflows:w},reset:{placement:D}};let $="bottom";switch(u){case"bestFit":{var P;const tt=(P=w.map(j=>[j,j.overflows.filter(V=>V>0).reduce((V,wt)=>V+wt,0)]).sort((j,V)=>j[1]-V[1])[0])==null?void 0:P[0].placement;tt&&($=tt);break}case"initialPlacement":$=r;break}if(o!==$)return{reset:{placement:$}}}return{}}}};async function Lt(t,e){const{placement:n,platform:o,elements:i}=t,s=await(o.isRTL==null?void 0:o.isRTL(i.floating)),r=H(n),c=U(n),l=_(n)==="x",f=["left","top"].includes(r)?-1:1,m=s&&l?-1:1,a=typeof e=="function"?e(t):e;let{mainAxis:u,crossAxis:g,alignmentAxis:d}=typeof a=="number"?{mainAxis:a,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...a};return c&&typeof d=="number"&&(g=c==="end"?d*-1:d),l?{x:g*m,y:u*f}:{x:u*f,y:g*m}}const zt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:o}=e,i=await Lt(e,t);return{x:n+i.x,y:o+i.y,data:i}}}};function Tt(t){return t==="x"?"y":"x"}const It=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:i}=e,{mainAxis:s=!0,crossAxis:r=!1,limiter:c={fn:v=>{let{x:h,y:p}=v;return{x:h,y:p}}},...l}=t,f={x:n,y:o},m=await at(e,l),a=_(H(i)),u=Tt(a);let g=f[a],d=f[u];if(s){const v=a==="y"?"top":"left",h=a==="y"?"bottom":"right",p=g+m[v],x=g-m[h];g=G(p,g,x)}if(r){const v=u==="y"?"top":"left",h=u==="y"?"bottom":"right",p=d+m[v],x=d-m[h];d=G(p,d,x)}const y=c.fn({...e,[a]:g,[u]:d});return{...y,data:{x:y.x-n,y:y.y-o}}}}};function A(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function E(t){return A(t).getComputedStyle(t)}function L(t){return ut(t)?(t.nodeName||"").toLowerCase():""}let z;function ft(){if(z)return z;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(z=t.brands.map(e=>e.brand+"/"+e.version).join(" "),z):navigator.userAgent}function O(t){return t instanceof A(t).HTMLElement}function R(t){return t instanceof A(t).Element}function ut(t){return t instanceof A(t).Node}function ot(t){if(typeof ShadowRoot>"u")return!1;const e=A(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function q(t){const{overflow:e,overflowX:n,overflowY:o,display:i}=E(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(i)}function kt(t){return["table","td","th"].includes(L(t))}function Q(t){const e=/firefox/i.test(ft()),n=E(t),o=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||(o?o!=="none":!1)||e&&n.willChange==="filter"||e&&(n.filter?n.filter!=="none":!1)||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const s=n.contain;return s!=null?s.includes(i):!1})}function dt(){return!/^((?!chrome|android).)*safari/i.test(ft())}function Z(t){return["html","body","#document"].includes(L(t))}const it=Math.min,N=Math.max,Y=Math.round;function mt(t){const e=E(t);let n=parseFloat(e.width),o=parseFloat(e.height);const i=t.offsetWidth,s=t.offsetHeight,r=Y(n)!==i||Y(o)!==s;return r&&(n=i,o=s),{width:n,height:o,fallback:r}}function gt(t){return R(t)?t:t.contextElement}const ht={x:1,y:1};function F(t){const e=gt(t);if(!O(e))return ht;const n=e.getBoundingClientRect(),{width:o,height:i,fallback:s}=mt(e);let r=(s?Y(n.width):n.width)/o,c=(s?Y(n.height):n.height)/i;return(!r||!Number.isFinite(r))&&(r=1),(!c||!Number.isFinite(c))&&(c=1),{x:r,y:c}}function S(t,e,n,o){var i,s;e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),c=gt(t);let l=ht;e&&(o?R(o)&&(l=F(o)):l=F(t));const f=c?A(c):window,m=!dt()&&n;let a=(r.left+(m&&((i=f.visualViewport)==null?void 0:i.offsetLeft)||0))/l.x,u=(r.top+(m&&((s=f.visualViewport)==null?void 0:s.offsetTop)||0))/l.y,g=r.width/l.x,d=r.height/l.y;if(c){const y=A(c),v=o&&R(o)?A(o):o;let h=y.frameElement;for(;h&&o&&v!==y;){const p=F(h),x=h.getBoundingClientRect(),b=getComputedStyle(h);x.x+=(h.clientLeft+parseFloat(b.paddingLeft))*p.x,x.y+=(h.clientTop+parseFloat(b.paddingTop))*p.y,a*=p.x,u*=p.y,g*=p.x,d*=p.y,a+=x.x,u+=x.y,h=A(h).frameElement}}return{width:g,height:d,top:u,right:a+g,bottom:u+d,left:a,x:a,y:u}}function T(t){return((ut(t)?t.ownerDocument:t.document)||window.document).documentElement}function K(t){return R(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function pt(t){return S(T(t)).left+K(t).scrollLeft}function St(t,e,n){const o=O(e),i=T(e),s=S(t,!0,n==="fixed",e);let r={scrollLeft:0,scrollTop:0};const c={x:0,y:0};if(o||!o&&n!=="fixed")if((L(e)!=="body"||q(i))&&(r=K(e)),O(e)){const l=S(e,!0);c.x=l.x+e.clientLeft,c.y=l.y+e.clientTop}else i&&(c.x=pt(i));return{x:s.left+r.scrollLeft-c.x,y:s.top+r.scrollTop-c.y,width:s.width,height:s.height}}function M(t){if(L(t)==="html")return t;const e=t.assignedSlot||t.parentNode||(ot(t)?t.host:null)||T(t);return ot(e)?e.host:e}function st(t){return!O(t)||E(t).position==="fixed"?null:t.offsetParent}function Pt(t){let e=M(t);for(;O(e)&&!Z(e);){if(Q(e))return e;e=M(e)}return null}function ct(t){const e=A(t);let n=st(t);for(;n&&kt(n)&&E(n).position==="static";)n=st(n);return n&&(L(n)==="html"||L(n)==="body"&&E(n).position==="static"&&!Q(n))?e:n||Pt(t)||e}function Dt(t){return mt(t)}function Ft(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=O(n),s=T(n);if(n===s)return e;let r={scrollLeft:0,scrollTop:0},c={x:1,y:1};const l={x:0,y:0};if((i||!i&&o!=="fixed")&&((L(n)!=="body"||q(s))&&(r=K(n)),O(n))){const f=S(n);c=F(n),l.x=f.x+n.clientLeft,l.y=f.y+n.clientTop}return{width:e.width*c.x,height:e.height*c.y,x:e.x*c.x-r.scrollLeft*c.x+l.x,y:e.y*c.y-r.scrollTop*c.y+l.y}}function Bt(t,e){const n=A(t),o=T(t),i=n.visualViewport;let s=o.clientWidth,r=o.clientHeight,c=0,l=0;if(i){s=i.width,r=i.height;const f=dt();(f||!f&&e==="fixed")&&(c=i.offsetLeft,l=i.offsetTop)}return{width:s,height:r,x:c,y:l}}function Vt(t){var e;const n=T(t),o=K(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=N(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),r=N(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let c=-o.scrollLeft+pt(t);const l=-o.scrollTop;return E(i||n).direction==="rtl"&&(c+=N(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:r,x:c,y:l}}function xt(t){const e=M(t);return Z(e)?t.ownerDocument.body:O(e)&&q(e)?e:xt(e)}function W(t,e){var n;e===void 0&&(e=[]);const o=xt(t),i=o===((n=t.ownerDocument)==null?void 0:n.body),s=A(o);return i?e.concat(s,s.visualViewport||[],q(o)?o:[]):e.concat(o,W(o))}function Nt(t,e){const n=S(t,!0,e==="fixed"),o=n.top+t.clientTop,i=n.left+t.clientLeft,s=O(t)?F(t):{x:1,y:1},r=t.clientWidth*s.x,c=t.clientHeight*s.y,l=i*s.x,f=o*s.y;return{top:f,left:l,right:l+r,bottom:f+c,x:l,y:f,width:r,height:c}}function rt(t,e,n){return e==="viewport"?I(Bt(t,n)):R(e)?Nt(e,n):I(Vt(T(t)))}function Wt(t,e){const n=e.get(t);if(n)return n;let o=W(t).filter(c=>R(c)&&L(c)!=="body"),i=null;const s=E(t).position==="fixed";let r=s?M(t):t;for(;R(r)&&!Z(r);){const c=E(r),l=Q(r);(s?!l&&!i:!l&&c.position==="static"&&!!i&&["absolute","fixed"].includes(i.position))?o=o.filter(m=>m!==r):i=c,r=M(r)}return e.set(t,o),o}function Mt(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const r=[...n==="clippingAncestors"?Wt(e,this._c):[].concat(n),o],c=r[0],l=r.reduce((f,m)=>{const a=rt(e,m,i);return f.top=N(a.top,f.top),f.right=it(a.right,f.right),f.bottom=it(a.bottom,f.bottom),f.left=N(a.left,f.left),f},rt(e,c,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}const Ht={getClippingRect:Mt,convertOffsetParentRelativeRectToViewportRelativeRect:Ft,isElement:R,getDimensions:Dt,getOffsetParent:ct,getDocumentElement:T,getScale:F,async getElementRects(t){let{reference:e,floating:n,strategy:o}=t;const i=this.getOffsetParent||ct,s=this.getDimensions;return{reference:St(e,await i(n),o),floating:{x:0,y:0,...await s(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>E(t).direction==="rtl"};function Xt(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:r=!0,animationFrame:c=!1}=o,l=i&&!c,f=l||s?[...R(t)?W(t):t.contextElement?W(t.contextElement):[],...W(e)]:[];f.forEach(d=>{l&&d.addEventListener("scroll",n,{passive:!0}),s&&d.addEventListener("resize",n)});let m=null;if(r){let d=!0;m=new ResizeObserver(()=>{d||n(),d=!1}),R(t)&&!c&&m.observe(t),!R(t)&&t.contextElement&&!c&&m.observe(t.contextElement),m.observe(e)}let a,u=c?S(t):null;c&&g();function g(){const d=S(t);u&&(d.x!==u.x||d.y!==u.y||d.width!==u.width||d.height!==u.height)&&n(),u=d,a=requestAnimationFrame(g)}return n(),()=>{var d;f.forEach(y=>{l&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),(d=m)==null||d.disconnect(),m=null,c&&cancelAnimationFrame(a)}}const Yt=(t,e,n)=>{const o=new Map,i={platform:Ht,...n},s={...i.platform,_c:o};return yt(t,e,{...i,platform:s})};export{Xt as a,Yt as b,_t as c,$t as d,jt as f,zt as o,It as s};
